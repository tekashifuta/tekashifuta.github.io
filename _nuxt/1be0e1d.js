(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{470:function(e,t,r){"use strict";r.r(t);var n=r(15),o=(r(66),r(21),r(58),{name:"LoginPage",data:function(){return{txtEmail:"",txtPass:"",dateNow:(new Date).toISOString().split("T")[0],token_id:"",user_role:"",storeItems:{userUID:"",userEmail:""}}},methods:{logMeIn:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$fire.auth.signInWithEmailAndPassword(e.txtEmail,e.txtPass);case 3:if(!(r=t.sent).user.multiFactor.user.uid){t.next=9;break}return t.next=7,e.checkDbAuth(JSON.stringify({e_mail:e.txtEmail,e_pass:r.user.multiFactor.user.uid}));case 7:return t.next=9,e.$fire.auth.onAuthStateChanged((function(t){var r={userUid:t.multiFactor.user.uid,userEmail:t.multiFactor.user.email,loggedIn:!0,tokenID:e.token_id,userRole:e.user_role};e.$store.dispatch("auth/saveToStore",r),"admin"==e.user_role||"sub_admin"==e.user_role?e.$router.push({name:"requestInfo"}):e.$router.push({name:"userIndex"})}));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},checkDbAuth:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.post("https://attendance.prycegas.com/prycegas_api_algar/jwt/login.php",e).then((function(e){console.log(e.data.role),t.token_id=e.data.token,t.user_role=e.data.role})).catch((function(e){console.log(e)}));case 2:case"end":return r.stop()}}),r)})))()}}}),c=r(86),l=r(116),d=r.n(l),m=r(355),v=r(396),x=r(369),f=r(465),h=r(466),_=r(366),w=r(460),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{attrs:{justify:"center",align:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"3"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(" Request Login ")]),e._v(" "),r("v-card-text",[r("v-text-field",{attrs:{label:"Email",solo:""},model:{value:e.txtEmail,callback:function(t){e.txtEmail=t},expression:"txtEmail"}})],1),e._v(" "),r("v-card-text",[r("v-text-field",{attrs:{label:"Password",type:"password",solo:""},model:{value:e.txtPass,callback:function(t){e.txtPass=t},expression:"txtPass"}})],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.logMeIn}},[e._v(" LOGIN ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:m.a,VCard:v.a,VCardActions:x.a,VCardText:x.b,VCardTitle:x.c,VCol:f.a,VRow:h.a,VSpacer:_.a,VTextField:w.a})}}]);